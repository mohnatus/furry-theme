{"version":3,"sources":["js/observer.js","js/drawer.js","js/advert/data.js","js/utils/dom.js","js/advert/ablock.js","js/advert/init.js","app.js"],"names":["defaultConfig","rootMargin","registerObserver","selector","entryCb","config","callback","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","target","setAttribute","unobserve","document","querySelectorAll","el","observe","drawerOpenClass","body","openMenu","classList","add","closeMenu","remove","Drawer","drawerOpeners","drawerClosers","searchField","querySelector","o","addEventListener","focus","c","client","url","header","footer","inPost","node","tag","attrs","children","n","createElement","Object","keys","k","appendChild","script","src","onLoad","onError","s","async","onload","onerror","className","loadedClassName","errorClassName","insAttrs","ABlock","name","ins","loaded","value","toggle","error","innerHTML","isSingular","contains","createBlock","setInPost","post","headers","i","limit","length","insertAdjacentElement","comments","getElementById","setTop","setBottom","ASet","AInit","blocks","window","adsbygoogle","aBlocks","map","b","dataset","aName","aBlock","push","removeAttribute","srcset","style","backgroundImage","background"],"mappings":"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","file":"app.js","sourceRoot":"..\\..\\src","sourcesContent":["const defaultConfig = {\r\n  rootMargin: '100px'\r\n}\r\n\r\nexport function registerObserver(selector, entryCb, config = {}) {\r\n  config = { ...defaultConfig, ...config} ;\r\n  const callback = (entries, observer) => {\r\n    entries.forEach((entry) => {\r\n      if (entry.isIntersecting) {\r\n        entryCb(entry.target);\r\n        entry.target.setAttribute('data-loaded', '');\r\n        observer.unobserve(entry.target);\r\n      }\r\n    })\r\n  };\r\n  const observer = new IntersectionObserver(callback, config);\r\n\r\n  const elements = [...document.querySelectorAll(selector)];\r\n  elements.forEach((el) => {\r\n    observer.observe(el);\r\n  });\r\n}\r\n","\r\nconst drawerOpenClass = 'drawer-open';\r\nconst body = document.body;\r\nfunction openMenu() {\r\n  body.classList.add(drawerOpenClass);\r\n}\r\n\r\nfunction closeMenu() {\r\n  body.classList.remove(drawerOpenClass);\r\n}\r\n\r\nexport function Drawer() {\r\n  const drawerOpeners = [...document.querySelectorAll('[data-drawer-open]')];\r\n  const drawerClosers = [...document.querySelectorAll('[data-drawer-close]')];\r\n\r\n  const drawer = document.querySelector('.drawer');\r\n  const searchField = drawer.querySelector('[name=\"s\"]');\r\n\r\n  drawerOpeners.forEach((o) => {\r\n    o.addEventListener('click', () => {\r\n      openMenu();\r\n      searchField.focus();\r\n    });\r\n  });\r\n\r\n  drawerClosers.forEach((c) => {\r\n    c.addEventListener('click', closeMenu);\r\n  })\r\n}\r\n","export const client = 'ca-pub-3389773486006292';\r\n\r\nexport const url = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js';\r\n\r\nexport const config = {\r\n  header: {\r\n    'data-ad-slot': '5208556855',\r\n    'data-ad-format': 'auto',\r\n  },\r\n  footer: {\r\n    'data-ad-slot': '3190281066',\r\n    'data-ad-format': 'auto',\r\n  },\r\n  inPost: {\r\n    'data-ad-slot': '8843408867',\r\n    'data-ad-layout': 'in-article',\r\n    'data-ad-format': 'fluid',\r\n  }\r\n};\r\n","export function node(tag, attrs = {}, children = []) {\r\n  const n = document.createElement(tag);\r\n  Object.keys(attrs).forEach(k => {\r\n    n.setAttribute(k, attrs[k]);\r\n  });\r\n  children.forEach(c => n.appendChild(c));\r\n  return n;\r\n}\r\n\r\nexport function script(src, onLoad, onError) {\r\n  const s = document.createElement('script');\r\n  s.async = true;\r\n  s.src = src;\r\n  s.onload = onLoad;\r\n  s.onerror = onError;\r\n  document.body.appendChild(s);\r\n}\r\n","import { client, config } from './data';\r\nimport { node } from '../utils/dom';\r\n\r\nconst className = 'a-block';\r\nconst loadedClassName = 'a-block--loaded';\r\nconst errorClassName = 'a-block--error';\r\n\r\n\r\nconst insAttrs = {\r\n  'class': 'adsbygoogle',\r\n  'style': 'display:block; text-align: center;',\r\n  'data-ad-client': client,\r\n  'data-full-width-responsive': 'true'\r\n}\r\n\r\nexport function ABlock(el, name) {\r\n  el.classList.add(className);\r\n\r\n  const attrs = {...insAttrs, ...config[name]};\r\n  const ins = node('ins', attrs);\r\n  el.appendChild(ins);\r\n\r\n  return {\r\n    el,\r\n    set loaded(value) {\r\n      el.classList.toggle(loadedClassName, value);\r\n    },\r\n    set error(value) {\r\n      el.classList.toggle(errorClassName, value);\r\n      if (value)\r\n        el.innerHTML = '<span>Пожалуйста, не блокируйте рекламу :(</span>';\r\n    },\r\n  };\r\n}\r\n","import { ABlock } from \"./ablock\";\r\nimport { script, node } from \"../utils/dom\";\r\nimport { url } from \"./data\";\r\n\r\nfunction isSingular() {\r\n  return document.body.classList.contains('single') || document.body.classList.contains('page');\r\n}\r\n\r\nfunction createBlock(name) {\r\n  return node('div', { 'data-a-name': name, 'data-a-block': '' });\r\n}\r\n\r\nfunction setInPost() {\r\n  const post = document.querySelector('.entry__content');\r\n  const headers = [...post.querySelectorAll('h2, h3')];\r\n  const step = 4;\r\n\r\n  for (let i = 0, limit = headers.length - 2; i <= limit; i += step) {\r\n    let header = headers[i];\r\n    header.insertAdjacentElement('beforebegin', createBlock('inPost'));\r\n  }\r\n\r\n  const comments = document.getElementById('comments');\r\n  if (comments) {\r\n    comments.insertAdjacentElement('beforebegin', createBlock('inPost'));\r\n  }\r\n}\r\n\r\nfunction setTop() {\r\n  const main = document.querySelector('.page-main');\r\n  main.querySelector('.container').insertAdjacentElement('afterbegin', createBlock('header'));\r\n}\r\n\r\nfunction setBottom() {\r\n  const pageContent = document.querySelector('.page-content');\r\n  pageContent.querySelector('.container').insertAdjacentElement('beforeend', createBlock('footer'));\r\n}\r\n\r\nexport function ASet() {\r\n  if (isSingular()) {\r\n    setInPost();\r\n  } else {\r\n    setTop();\r\n  }\r\n\r\n  setBottom();\r\n\r\n  AInit();\r\n}\r\n\r\nexport function AInit() {\r\n  const blocks = [...document.querySelectorAll('[data-a-block]')];\r\n  if (!blocks.length) return;\r\n\r\n  window.adsbygoogle = window.adsbygoogle || [];\r\n  const aBlocks = blocks.map(b => {\r\n    const name = b.dataset.aName;\r\n    if (!name) return;\r\n\r\n    const aBlock = ABlock(b, name);\r\n    window.adsbygoogle.push({});\r\n    return aBlock;\r\n  });\r\n\r\n  script(url, () => {\r\n    aBlocks.forEach(b => b.loaded = true);\r\n  }, () => {\r\n    aBlocks.forEach(b => b.error = true);\r\n  })\r\n}\r\n","import { registerObserver } from './js/observer';\r\nimport { Drawer } from './js/drawer';\r\nimport { ASet } from './js/advert/init';\r\n\r\nDrawer();\r\n\r\nregisterObserver('[data-src]', function(target) {\r\n  target.src = target.dataset.src;\r\n  target.removeAttribute('data-src');\r\n})\r\n\r\nregisterObserver('[data-srcset]',function(target) {\r\n  target.srcset = target.dataset.srcset;\r\n  target.removeAttribute('data-srcset');\r\n})\r\n\r\nregisterObserver('[data-background]', function(target) {\r\n  target.style.backgroundImage = \"url(\" + target.dataset.background + \")\";\r\n  target.removeAttribute('data-background');\r\n})\r\n\r\nregisterObserver('.entry-preview.transformed', function(target) {\r\n  target.classList.remove('transformed');\r\n}, {\r\n  rootMargin: '-250px'\r\n});\r\n\r\nASet();\r\n"]}