{"version":3,"sources":["js/contentlist.js","entry.js"],"names":["getHeaders","headers","content","document","querySelector","querySelectorAll","map","el","text","textContent","id","replace","root","tagName","toUpperCase","createAnchor","anchor","createElement","className","href","name","createItem","item","link","appendChild","createList","items","list","forEach","itemData","innerList","createTitle","ContentList","h","insertAdjacentElement","contentList","oneLevelList","hasAttribute","reduce","acc","length","push","title","addEventListener","e","classList","toggle","add"],"mappings":";AA8FC,aAAA,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,mDAAA,SAAA,EAAA,GAAA,GAAA,OAAA,YAAA,OAAA,IAAA,uBAAA,OAAA,UAAA,SAAA,KAAA,GAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,CAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,EAAA,QAAA,EAAA,EAAA,OAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,GA9FD,SAASA,IAIAC,OAFaC,EADJC,SAASC,cAAc,mBACXC,iBAAiB,WAE9BC,IAAI,SAACC,GACZC,IAAAA,EAAOD,EAAGE,YACVC,EAAKF,EAAKG,QAAQ,SAAU,KAC3B,MAAA,CACLJ,GAAAA,EACAK,KAAmC,OAA7BL,EAAGM,QAAQC,cACjBN,KAAMA,EACNE,GAAIA,KAKV,SAASK,EAAaL,GACdM,IAAAA,EAASb,SAASc,cAAc,KAI/BD,OAHPA,EAAOE,UAAY,SACnBF,EAAOG,KAAWT,IAAAA,OAAAA,GAClBM,EAAOI,KAAOV,EACPM,EAGT,SAASK,EAAWC,GACZf,IAAAA,EAAKJ,SAASc,cAAc,MAC5BM,EAAOpB,SAASc,cAAc,KAI7BV,OAHPgB,EAAKJ,KAAWG,IAAAA,OAAAA,EAAKZ,IACrBa,EAAKd,YAAca,EAAKd,KACxBD,EAAGiB,YAAYD,GACRhB,EAGT,SAASkB,EAAWC,EAAOR,GACrBS,IAAAA,EAAOxB,SAASc,cAAc,MAU3BU,OATHT,IAAWS,EAAKT,UAAYA,GAChCQ,EAAME,QAAQ,SAACC,GACTtB,IAAAA,EAAKc,EAAWQ,GAChBA,GAAAA,EAASH,MAAO,CACdI,IAAAA,EAAYL,EAAWI,EAASH,OACpCnB,EAAGiB,YAAYM,GAEjBH,EAAKH,YAAYjB,KAEZoB,EAGT,SAASI,EAAYb,GACbX,IAAAA,EAAKJ,SAASc,cAAc,MAG3BV,OAFPA,EAAGE,YAAc,aACjBF,EAAGW,UAAYA,EACRX,EAGF,SAASyB,IACR/B,IAAAA,EAAUD,IAChBC,EAAQ2B,QAAQ,SAAAK,GACdA,EAAE1B,GAAG2B,sBAAsB,aAAcnB,EAAakB,EAAEvB,OAGpDyB,IAAAA,EAAchC,SAASC,cAAc,gBACvC+B,GAAAA,EAAa,CACTC,IAAAA,EAAeD,EAAYE,aAAa,aAExCV,EAAO1B,EAAQqC,OAAO,SAACC,EAAKN,GAC5BA,GAAAA,EAAErB,KAAM,CACFF,IAAAA,EAAauB,EAAbvB,GAAIF,EAASyB,EAATzB,KAEP+B,MAAAA,GAAAA,OAAAA,EAAAA,GACH,CAAA,CAAE7B,GAAAA,EAAIF,KAAAA,EAAMkB,MAAO,MAInBU,GAAAA,EAAc,OAAOG,EAEnB3B,IAAAA,EAAO2B,EAAIA,EAAIC,OAAS,GAC1B,IAAC5B,EAAM,OAAO2B,EAEV7B,IAAAA,EAAauB,EAAbvB,GAAIF,EAASyB,EAATzB,KAEL+B,OADP3B,EAAKc,MAAMe,KAAK,CAAE/B,GAAAA,EAAIF,KAAAA,IACf+B,GAEN,IAGGG,EAAQX,EAAY,sBAC1BI,EAAYX,YAAYkB,GACxBA,EAAMC,iBAAiB,QAAS,SAASC,GACvCT,EAAYU,UAAUC,OAAO,yBAG/BX,EAAYX,YAAYC,EAAWE,EAAM,sBACzCQ,EAAYU,UAAUE,IAAI,wBAE7B,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,YAAA;;AC5FD,aAFA,IAAA,EAAA,QAAA,qBAEA,EAAA,EAAA","file":"entry.js","sourceRoot":"..\\..\\src","sourcesContent":["function getHeaders() {\r\n  const content = document.querySelector('.entry__content');\r\n  const headers = [...content.querySelectorAll('h2, h3')];\r\n\r\n  return headers.map((el) => {\r\n    const text = el.textContent;\r\n    const id = text.replace(/[\\s-]/g, '_');\r\n    return {\r\n      el,\r\n      root: el.tagName.toUpperCase() === 'H2',\r\n      text: text,\r\n      id: id,\r\n    };\r\n  });\r\n}\r\n\r\nfunction createAnchor(id) {\r\n  const anchor = document.createElement('a');\r\n  anchor.className = 'anchor';\r\n  anchor.href = `#${id}`;\r\n  anchor.name = id;\r\n  return anchor;\r\n}\r\n\r\nfunction createItem(item) {\r\n  const el = document.createElement('li');\r\n  const link = document.createElement('a');\r\n  link.href = `#${item.id}`;\r\n  link.textContent = item.text;\r\n  el.appendChild(link);\r\n  return el;\r\n}\r\n\r\nfunction createList(items, className) {\r\n  let list = document.createElement('ul');\r\n  if (className) list.className = className;\r\n  items.forEach((itemData) => {\r\n    let el = createItem(itemData);\r\n    if (itemData.items) {\r\n      let innerList = createList(itemData.items);\r\n      el.appendChild(innerList);\r\n    }\r\n    list.appendChild(el);\r\n  });\r\n  return list;\r\n}\r\n\r\nfunction createTitle(className) {\r\n  const el = document.createElement('h2');\r\n  el.textContent = 'Содержание';\r\n  el.className = className;\r\n  return el;\r\n}\r\n\r\nexport function ContentList() {\r\n  const headers = getHeaders();\r\n  headers.forEach(h => {\r\n    h.el.insertAdjacentElement('afterbegin', createAnchor(h.id));\r\n  });\r\n\r\n  const contentList = document.querySelector('.contentlist');\r\n  if (contentList) {\r\n    const oneLevelList = contentList.hasAttribute('data-root');\r\n\r\n    const list = headers.reduce((acc, h) => {\r\n      if (h.root) {\r\n        const { id, text } = h;\r\n        return [\r\n          ...acc,\r\n          { id, text, items: [] }\r\n        ];\r\n      }\r\n\r\n      if (oneLevelList) return acc;\r\n\r\n      const root = acc[acc.length - 1];\r\n      if (!root) return acc;\r\n\r\n      const { id, text } = h;\r\n      root.items.push({ id, text });\r\n      return acc;\r\n\r\n    }, []);\r\n\r\n\r\n    const title = createTitle('contentlist__title');\r\n    contentList.appendChild(title);\r\n    title.addEventListener('click', function(e) {\r\n      contentList.classList.toggle('contentlist--closed');\r\n    });\r\n\r\n    contentList.appendChild(createList(list, 'contentlist__root'));\r\n    contentList.classList.add('contentlist--loaded');\r\n  }\r\n}\r\n","import { ContentList } from \"./js/contentlist\";\r\n\r\nContentList();\r\n"]}