{"version":3,"sources":["js/contentlist.js","entry.js"],"names":["getHeaders","content","document","querySelector","headers","querySelectorAll","map","el","text","textContent","id","replace","root","tagName","toUpperCase","createAnchor","anchor","createElement","className","href","name","createItem","item","link","appendChild","createList","items","console","log","list","forEach","itemData","innerList","createTitle","ContentList","h","insertAdjacentElement","contentList","oneLevelList","hasAttribute","reduce","acc","length","push","title","addEventListener","e","classList","toggle","add"],"mappings":"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","file":"entry.js","sourceRoot":"..\\..\\src","sourcesContent":["function getHeaders() {\r\n  const content = document.querySelector('.entry__content');\r\n  const headers = [...content.querySelectorAll('h2, h3')];\r\n\r\n  return headers.map((el) => {\r\n    const text = el.textContent;\r\n    const id = text.replace(/[\\s-]/g, '_');\r\n    return {\r\n      el,\r\n      root: el.tagName.toUpperCase() === 'H2',\r\n      text: text,\r\n      id: id,\r\n    };\r\n  });\r\n}\r\n\r\nfunction createAnchor(id) {\r\n  const anchor = document.createElement('a');\r\n  anchor.className = 'anchor';\r\n  anchor.href = `#${id}`;\r\n  anchor.name = id;\r\n  return anchor;\r\n}\r\n\r\nfunction createItem(item) {\r\n  const el = document.createElement('li');\r\n  const link = document.createElement('a');\r\n  link.href = `#${item.id}`;\r\n  link.textContent = item.text;\r\n  el.appendChild(link);\r\n  return el;\r\n}\r\n\r\nfunction createList(items, className) {\r\n  console.log(items)\r\n  let list = document.createElement('ul');\r\n  if (className) list.className = className;\r\n  items.forEach((itemData) => {\r\n    let el = createItem(itemData);\r\n    if (itemData.items) {\r\n      let innerList = createList(itemData.items);\r\n      el.appendChild(innerList);\r\n    }\r\n    list.appendChild(el);\r\n  });\r\n  return list;\r\n}\r\n\r\nfunction createTitle(className) {\r\n  const el = document.createElement('h2');\r\n  el.textContent = 'Содержание';\r\n  el.className = className;\r\n  return el;\r\n}\r\n\r\nexport function ContentList() {\r\n  const headers = getHeaders();\r\n  headers.forEach(h => {\r\n    h.el.insertAdjacentElement('afterbegin', createAnchor(h.id));\r\n  });\r\n\r\n  const contentList = document.querySelector('.contentlist');\r\n  if (contentList) {\r\n    const oneLevelList = contentList.hasAttribute('data-root');\r\n\r\n    const list = headers.reduce((acc, h) => {\r\n      if (h.root) {\r\n        const { id, text } = h;\r\n        return [\r\n          ...acc,\r\n          { id, text, items: [] }\r\n        ];\r\n      }\r\n\r\n      if (oneLevelList) return acc;\r\n\r\n      const root = acc[acc.length - 1];\r\n      if (!root) return acc;\r\n\r\n      const { id, text } = h;\r\n      root.items.push({ id, text });\r\n      return acc;\r\n\r\n    }, []);\r\n\r\n\r\n    const title = createTitle('contentlist__title');\r\n    contentList.appendChild(title);\r\n    title.addEventListener('click', function(e) {\r\n      contentList.classList.toggle('contentlist--closed');\r\n    });\r\n\r\n    contentList.appendChild(createList(list, 'contentlist__root'));\r\n    contentList.classList.add('contentlist--loaded');\r\n  }\r\n}\r\n","import { ContentList } from \"./js/contentlist\";\r\n\r\nContentList();\r\n"]}